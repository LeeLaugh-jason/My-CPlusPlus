# 构建函数、析构函数与生命周期

我们之前聊到类的概念，我们称类为数据结构＋算法。而构造函数和析构函数是用户自定义数据类型中特有的数据初始化与资源获取和释放对象全部资源的方法。

这里的用户自定义数据类型指类/结构体

这句话有点长，我们用代码来解释：

```
class Students {
public:
    std::string name;
    int *age;

    Students(std::string n, int a){
        name = n;
        age = new int(a);
    }

    // ~Students(){
    //     delete age;
    // }

    void introduce() {
        std::cout << "我是 " << name << "，今年 " << *age << " 岁。" << std::endl;
    }
};
```

在代码中我定义了一个`Students`类，并定义了字符串`name`和指针`age`。
此时你会发现，我们定义了`*age`却没有初始化，此时它是一个野指针，调用起来会十分危险。

于是我们又定义了一个与类的名字相同的函数放在public下，代表 **析构函数**。
这个函数随着对象的创建而运行。

我们可以在构造函数中做到输入数据时初始化对象数据，在创建类的同时在堆中为age指针分配内存。

```
Students(){
        name = 0;
        age = nullptr;
    }
```

也可以用这样的方式，提前给类中数据分配资源，然后在主程序中单个赋值。

构造函数的优点在于，我们可以给类中的数据统一的资源获取，包括打开文件、在堆中分配地址等。

在类的作用域销毁的时候，类会自动执行析构函数`~Students`，这个函数的命名规则是在类的名称前加上`~`。

我们在04章学习到，动态分配堆上的内存后，我们需要手动将其释放。而一个一个在主程序中`delete`很麻烦，写一个函数`delete`固然可以，
但当出现很多对象的时候也会很麻烦。于是我们可以直接在析构函数中释放对应类的内存数据。这样既安全又方便。

### 生命周期

对象或者变量在构建和析构之间的时间，如果需要调用这个对象或者变量，必须要在这个对象和变量的生命周期中。
